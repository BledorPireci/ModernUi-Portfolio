const sections=document.querySelectorAll("section"),navLinks=document.querySelectorAll(".bottom-nav a");function handleSpecialSections(e,t,o=!1){if("experience"===e||"skills"===e){if(!o){const e=80;return t.offsetTop-e}{const e=t.querySelector("h1, h2");e&&(e.style.position="relative",e.style.marginTop="2rem")}}return null}let isScrolling;document.addEventListener("DOMContentLoaded",(()=>{AOS.init({disable:window.innerWidth<768,once:!0,offset:100,duration:600,delay:0})})),window.addEventListener("scroll",(()=>{window.clearTimeout(isScrolling),isScrolling=setTimeout((()=>{let e="";sections.forEach((t=>{const o=t.getBoundingClientRect(),n=window.innerHeight/2;o.top<=n+100&&o.bottom>=n-100&&(e=t.getAttribute("id"))})),navLinks.forEach((t=>{t.classList.remove("active"),t.getAttribute("href").substring(1)===e&&t.classList.add("active")}))}),50)}),{passive:!0});const darkModeToggle=document.getElementById("darkmode-toggle"),body=document.body,savedTheme=localStorage.getItem("theme");"dark"===savedTheme&&(body.classList.add("dark-theme"),darkModeToggle.checked=!0),darkModeToggle.addEventListener("click",(function(e){e.stopPropagation()})),darkModeToggle.addEventListener("change",(function(){console.log("Toggle changed:",this.checked),this.checked?(body.classList.add("dark-theme"),localStorage.setItem("theme","dark")):(body.classList.remove("dark-theme"),localStorage.setItem("theme","light"))}));const heroBackground=document.querySelector(".hero-background"),heroSection=document.querySelector("#home");window.addEventListener("scroll",(function(){const e=heroSection.getBoundingClientRect();if(e.top>=0)heroBackground.style.filter="blur(0px)";else{const t=Math.abs(e.top),o=Math.min(t/10,32);heroBackground.style.filter=`blur(${o}px)`}})),document.querySelectorAll(".bottom-nav a").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href").substring(1),o=document.getElementById(t);if(o){const e=handleSpecialSections(t,o);null!==e?window.scrollTo({top:e,behavior:"smooth"}):o.scrollIntoView({behavior:"smooth"})}}))}));